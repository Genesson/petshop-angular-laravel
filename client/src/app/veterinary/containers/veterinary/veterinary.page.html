<app-header [title]="'Veterinário'"></app-header>

<ion-content class="sp-veterinary-content">
    <ion-grid class="sp-form">
        <ion-row>
            <ion-col size="6">
                <ion-button color="success" shape="round" mode="ios" (click)="openModalVeterinaryPet()">Nova Consulta</ion-button>
            </ion-col>
            <ion-col size="6" class="sp-veterinary-search">
                <ion-grid>
                    <ion-row>
                        <ion-col size="8">
                            <ion-item>
                                <ion-input placeholder="Digite o nome..." class="sp-search" #input></ion-input>
                            </ion-item>
                        </ion-col>
                        <ion-col size="4">
                            <ion-button color="primary" shape="round" mode="ios" expand="block" (click)="updateFilterPetName(input.value)">Pesquisar</ion-button>
                        </ion-col>
                    </ion-row>
                </ion-grid>
            </ion-col>
        </ion-row>
    </ion-grid>

    <ion-grid>
        <ion-row>
            <ion-col>
                <ngx-datatable #table
                               [rows]="rows"
                               [ngClass]="'material'"
                               [rowHeight]="'auto'"
                               [headerHeight]="50"
                               [columnMode]="'force'"
                               [messages]="{emptyMessage:'Nenhum resultado encontrado.'}">
                    <ngx-datatable-column name="Veterinário">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                            {{ row?.pet?.vet_name }}
                        </ng-template>
                    </ngx-datatable-column>
                    <ngx-datatable-column name="Tutor">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                            {{ row?.pet?.user?.name }}
                        </ng-template>
                    </ngx-datatable-column>
                    <ngx-datatable-column name="Pet">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                            {{ row?.pet?.name }}
                        </ng-template>
                    </ngx-datatable-column>
                    <ngx-datatable-column name="Data Consulta">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                            {{ row?.created_at | date: 'dd/MM/yyyy' }}
                        </ng-template>
                    </ngx-datatable-column>
                    <ngx-datatable-column name="Opções" sortable="false">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                            <ion-button color="light" mode="ios" (click)="openModalVeterinaryView(row)">
                                <ion-icon src="assets/icon/eye.svg"></ion-icon>
                            </ion-button>
                        </ng-template>
                    </ngx-datatable-column>
                </ngx-datatable>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>
